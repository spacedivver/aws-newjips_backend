import{v as A,r as d,n as H,a as M,b as N,o as P,e as k,f as o,j as R,t as c,g as l,q as $,m as V,s as _,x as h,i as B,Q as C}from"./index-1bL1-Tb4.js";import{_ as I}from"./SideBar-Dl33mgkM.js";const z={class:"container-fluid"},E={class:"row px-xl-3"},T={class:"col-lg-2"},q={class:"col-lg-10 col-xl-8 col-lg-3 mt-5 ms-5"},L={class:"card border mb-5"},Q={class:"card-header border-bottom"},G={class:"card-header-title"},J={class:"card-body"},K={class:"col-12"},O={class:"form-label ms-1",style:{color:"#bababa"}},W=o("span",{class:"text-danger"},"*",-1),X={class:"d-flex align-items-start mb-3"},Y={class:"mt-3 ms-5",for:"uploadfile",title:"Replace this pic",style:{cursor:"pointer",display:"flex","align-items":"center","justify-content":"center"}},Z={style:{position:"relative",display:"inline-block"}},ee=["src"],oe=o("div",{style:{position:"absolute",bottom:"5px",right:"5px","background-color":"white","border-radius":"50%",padding:"5px",display:"flex","justify-content":"center","align-items":"center"}},[o("i",{class:"fa-solid fa-camera"})],-1),te={class:"col-md-6"},se={class:"nicname mb-2"},ae=o("span",{class:"text-danger"},"*",-1),le=o("br",null,null,-1),ne=["placeholder"],ie={class:"col-12 text-end"},ce={class:"btn mb-1 me-3",style:{border:"1px solid #ff8f17","max-height":"100%","background-color":"#ff8f17",color:"white"}},de={class:"card border mb-5"},re={class:"card-header card-bottom"},me={class:"card-header-title"},ue={class:"card-body"},pe={class:"mb-3"},_e={class:"form-label"},he=["placeholder"],fe={class:"mb-3"},ve={class:"form-label"},be=["placeholder"],ge={class:"mb-3"},we={class:"form-label"},ye=["placeholder"],xe={key:0,class:"ms-2",style:{color:"red"}},Pe={class:"col-12 text-end"},ke=5*1024*1024,Fe={__name:"MyEditPage",setup(Ve){const{t:s,locale:Ce}=A.useI18n(),f=d(""),m=H(),D=M(),v=d(""),b=d(null),u=d(""),r=d(""),p=d(""),g=d(!0),i=N({uno:m.uno,nickname:m.nickname,password:"",avatar:null});v.value=m.profilePic;const j=async()=>{var n;if(b.value&&(i.avatar=b.value),!!confirm(s("common.edit.info")))try{const t=new FormData;t.append("avatar",i.avatar),t.append("nickname",i.nickname),t.append("uno",i.uno);let a=await C.update(t);f.value="",i.nickname=a.nickname,i.profilePic=a.profilePic,m.changeProfile(i),alert(s("common.edit.infoedit")),D.go(0)}catch(t){console.log(t),f.value=((n=t.response)==null?void 0:n.data)||"알 수 없는 오류가 발생했습니다."}},F=async()=>{try{const n=new FormData;n.append("newPassword",r.value),n.append("oldPassword",u.value),n.append("uno",i.uno),await C.changePassword(n),alert(s("common.edit.infoedit")),u.value="",r.value="",p.value=""}catch(n){alert(n.message)}},w=()=>{r.value===p.value?g.value=!0:g.value=!1},S=n=>{var a,y;const t=n.target.files[0];if(t){if(t.size>ke){alert(s("common.edit.file"));return}const x=new FileReader;x.onload=U=>{v.value=U.target.result},x.readAsDataURL(t),b.value=t}else console.log("API 호출 중 오류 발생:",e),f.value=((y=(a=e.response)==null?void 0:a.data)==null?void 0:y.message)||"알 수 없는 오류가 발생했습니다."};return(n,t)=>(P(),k("div",z,[o("div",E,[o("div",T,[R(I)]),o("div",q,[o("div",L,[o("div",Q,[o("h4",G,c(l(s)("common.edit.personal")),1)]),o("div",J,[o("form",{class:"row g-3",onSubmit:$(j,["prevent"])},[o("div",K,[o("label",O,[V(c(l(s)("common.edit.upload_img"))+" ",1),W]),o("div",X,[o("label",Y,[o("div",Z,[o("img",{class:"avatar-img",src:v.value,style:{width:"100px",height:"100px","object-fit":"cover","border-radius":"50%"}},null,8,ee),oe])]),o("input",{type:"file",id:"uploadfile",style:{display:"none"},accept:"image/*",onChange:S},null,32)])]),o("div",te,[o("label",se,[V(c(l(s)("common.edit.nickname"))+" ",1),ae]),le,_(o("input",{class:"text-nicname w-100",value:"",type:"text",placeholder:l(s)("common.edit.nicknameHolder"),"onUpdate:modelValue":t[0]||(t[0]=a=>i.nickname=a),style:{border:"2px solid #eaecef","border-radius":"3px",padding:"2%"}},null,8,ne),[[h,i.nickname]])]),o("div",ie,[o("button",ce,c(l(s)("common.edit.edit")),1)])],32)])]),o("div",de,[o("div",re,[o("h4",me,c(l(s)("common.edit.changePw")),1)]),o("div",ue,[o("div",pe,[o("label",_e,c(l(s)("common.edit.oldPw")),1),_(o("input",{class:"form-control","onUpdate:modelValue":t[1]||(t[1]=a=>u.value=a),type:"password",placeholder:l(s)("common.edit.oldPwHolder")},null,8,he),[[h,u.value]])]),o("div",fe,[o("label",ve,c(l(s)("common.edit.newPw")),1),_(o("input",{class:"form-control","onUpdate:modelValue":t[2]||(t[2]=a=>r.value=a),type:"password",placeholder:l(s)("common.edit.newPwHolder"),onChange:t[3]||(t[3]=a=>w())},null,40,be),[[h,r.value]])]),o("div",ge,[o("label",we,c(l(s)("common.edit.checkPw")),1),_(o("input",{class:"form-control","onUpdate:modelValue":t[4]||(t[4]=a=>p.value=a),type:"password",placeholder:l(s)("common.edit.checkPwHolder"),onChange:t[5]||(t[5]=a=>w())},null,40,ye),[[h,p.value]]),g.value?B("",!0):(P(),k("span",xe,c(l(s)("common.edit.notpw")),1))]),o("div",Pe,[o("button",{onClick:t[6]||(t[6]=a=>F()),class:"btn mb-1 me-3",style:{border:"1px solid #ff8f17","max-height":"100%","background-color":"#ff8f17",color:"white"}},c(l(s)("common.edit.edit")),1)])])])])])]))}};export{Fe as default};
